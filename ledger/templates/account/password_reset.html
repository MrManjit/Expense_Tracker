{% extends "ledger/base.html" %}
{% load static %}

{% block title %}Reset Password - Expense Tracker{% endblock %}

{% block body_class %}login-page{% endblock %}

{% block content %}
<style>
    .login-container {
      position: fixed;
      top: 100px;
      left: 60px;
      right: 60px;
      bottom: 40px;
      background-image: linear-gradient(135deg, rgba(188, 205, 199, 0.8) 0%, rgba(173, 176, 143, 0.8) 100%), url('https://images.unsplash.com/photo-1554224155-6726b3ff858f?auto=format&fit=crop&w=1920&q=80');
      background-position: center 55%;
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: cover;
      display: flex; align-items: center; justify-content: center;
      padding: 20px; position: fixed; overflow-y: auto; -webkit-overflow-scrolling: touch; z-index: 1050;
    }
    .login-container::before { content:''; position:absolute; inset:0; background:rgba(0,0,0,0.3); z-index:1; }
    .login-card {
      background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px);
      border-radius: 20px; box-shadow: 0 25px 50px rgba(0,0,0,0.15);
      max-width: 550px; width: 100%; z-index:2; position:relative; overflow:hidden;
      display: flex; flex-direction: column; max-height: calc(100vh - 120px);
    }
    .login-header {
      background: linear-gradient(135deg, #2c5530 0%, #1e7b3d 100%);
      color: white; padding: 30px 20px; text-align: center; margin: -20px -20px 20px -20px;
    }
    .login-header h4 { margin: 0; font-size: 28px; font-weight: 600; }
    .login-icon { font-size: 48px; margin-bottom: 10px; opacity: 0.9; }

    .form-control { border-radius: 10px; border: 2px solid #e9ecef; padding: 12px 16px; font-size: 16px; width:100%; transition: .3s; }
    .form-control:focus { border-color: #2c5530; box-shadow: 0 0 0 .2rem rgba(46,125,50,.25); outline: none; }
    .form-group { margin-bottom: 1rem; }
    .form-label { font-weight: 600; color: #495057; margin-bottom: 8px; }

    .btn-login {
        background: linear-gradient(135deg, #2c5530 0%, #1e7b3d 100%);
        border: none; border-radius: 10px; padding: 12px 30px; font-size: 16px;
        font-weight: 600; color: white; width: 100%; transition: .3s;
        box-shadow: 0 4px 15px rgba(46,125,50,.3);
    }
    .btn-login:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(46,125,50,.4);
        background: linear-gradient(135deg, #1e7b3d 0%, #2c5530 100%); }

    .helper-link { color: #1e7b3d; font-weight: 600; text-decoration: none; }
    .helper-link:hover { text-decoration: underline; }

    @media (prefers-color-scheme: dark) {
        .login-card { background: rgba(28,28,28,0.9); }
        .form-label { color: #e8eaed; }
        .helper-link { color: #8bd79e; }
    }
    /* ensure the card body scrolls and reserves scrollbar gutter to avoid width jumps */
    .login-card .card-body { padding: 16px; overflow-y: auto; -webkit-overflow-scrolling: touch; scrollbar-gutter: stable; }
</style>

<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <div class="login-icon">ðŸ”’</div>
      <h4>Reset Your Password</h4>
      <p class="mb-0 opacity-75">Enter your email to receive a reset link</p>
    </div>

    <div class="card-body p-4">
      <form method="post" action="">
        {% csrf_token %}

        {% if form.non_field_errors %}
          <div class="alert alert-danger">
              {% for error in form.non_field_errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}

        <div class="form-group">
          <label class="form-label" for="id_email">Email</label>
          <input type="email" name="email" id="id_email" class="form-control"
                 value="{{ form.email.value|default:'' }}" required>
          {% if form.email.errors %}
            <div class="text-danger mt-1">{{ form.email.errors }}</div>
          {% endif %}
        </div>

        <div class="d-grid gap-2 mb-2">
          <button type="submit" class="btn btn-login">Send Reset Link</button>
        </div>

        <div class="mt-2">
          <div>
            <a class="helper-link" href="{% url 'account_login' %}">Back to login</a>
          </div>
          <div class="mt-2">
            <a class="helper-link" href="{% url 'account_signup' %}">Create an account</a>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}